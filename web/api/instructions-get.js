export default async function handler(req,res){ try{ const owner=process.env.IK_OWNER, repo=process.env.IK_REPO, branch=process.env.IK_BRANCH||'main'; const token=process.env.IK_GH_TOKEN; const path='brain/instructions/system.md'; const r=await fetch(`https://api.github.com/repos/${owner}/${repo}/contents/${encodeURIComponent(path)}?ref=${encodeURIComponent(branch)}`,{headers:{Authorization:`Bearer ${token}`,Accept:'application/vnd.github+json'}}); if(!r.ok) return res.status(r.status).json({error:await r.text()}); const j=await r.json(); const text=j.content?Buffer.from(j.content,'base64').toString('utf8'):''; res.status(200).json({ok:true,path,sha:j.sha,text}); }catch(e){ res.status(500).json({ok:false,error:e.message}); } }